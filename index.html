<!DOCTYPE html>
<html lang="en">
<head>
    <!--bootstrap-->
    <link href="style.css" rel="stylesheet" type="text/css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI 첫인상 테스트</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>
    <!--bootstrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <a class="navbar-brand" href = "https://meek-pothos-c56deb.netlify.app/">MBTI 첫인상 테스트</a>
        </div>
      </nav>
      <div class = "title-container">
        <div class = "title">인공지능 MBTI 첫인상 테스트</div>
        <div class = "subtitle">내 첫인상은 어떤 MBTI같을까?</div>
    </div>
<!--이미지 업로드-->
<!-- Upload  -->
<div class = "drop-zone-container">
    <div class = "height"></div>
    <div class="drop-zone">
        <div class="drop-zone__prompt">얼굴 사진을 올려놓거나 눌러서 업로드 하세요!</div>
        <input type="file" name="myFile" class="drop-zone__input">
    </div>  
    <div id = "first-name"></div>
    <div id = "content-container">
    <div id = "content">*사진은 절대 어디에도 저장되지 않습니다*</div>
    <div id="loadingImg">
    </div>
    </div>

    <!--이미지 업로드-->
<div class = "container">
    <span id="myProgress"> 
        <div id="label-container" class="d-flex flex-column justify-content-around">
        </div>
    </span>
</div>
</div>

<!--티쳐블 머신-->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

<script>
    

    function loading(){
        var aijudge = "<div id = 'ai-judge'>AI가 당신의 MBTI를 분석중입니다.</div>"
        var elem = "<img src='./loading.gif' id = 'image'>";
        document.getElementById("loadingImg").innerHTML = elem;
  }
  
    function closeLoadingWithMask() {
        document.getElementById("loadingImg").style.display = 'none'; 
  }

</script>

<!--이미지 관련 자바스크립트 코드-->
<script src="./upload.js"></script>
<!--이미지 관련 자바스크립트 코드-->

<script type="text/javascript">
    // More API functions here:
    // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image
    // the link to your model provided by Teachable Machine export panel
    const URL = "./my_model/";

    let model, webcam, labelContainer, maxPredictions;

    // Load the image model and setup the webcam
    async function init() { // 모델 초기화
        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";

        // load the model and metadata
        // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
        // or files from your local hard drive
        // Note: the pose library adds "tmImage" object to your window (window.tmImage)
        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();
        // append elements to the DOM
        labelContainer = document.getElementById("label-container");
        for (let i = 0; i < 4; i++) { // and class labels
            var element = document.createElement("div");
            element.classList.add("d-flex");
            labelContainer.appendChild(element);
        }
    }

    // run the webcam image through the image model
    async function predict() {
        // predict can take in an image, video or canvas html element
        var upload = document.getElementById("imageUpload");
        var name  = document.getElementById("label-container");
        var prediction = await model.predict(upload, false);
          prediction.sort((a,b) => parseFloat(b.probability) - parseFloat(a.probability));

        for (let i = 0; i < 4; i++) {
            var barWidth = prediction[i].probability.toFixed(2)*100 + "%";
            var labelTitle = prediction[i].className;
            var MbtiName = "<div class='Mbti-label d-flex align-items-center'>" + labelTitle + "</div>"
            var MbtiBar = "<div class='bar-container position-relative container'><div class='MbtiName'></div><div class='d-flex justify-content-center align-items-center Mbti-bar' style='width: " + barWidth + "'><span class='d-block percent-text'>" + barWidth + 
                        "</span></div></div>"
            labelContainer.childNodes[i+1].innerHTML = MbtiName + MbtiBar;

            switch(i){
                case 0:
                    document.getElementsByClassName("bar-container")[0].style.backgroundColor="#e1f6f2";
                    document.getElementsByClassName("Mbti-bar")[0].style.backgroundColor="#a6e4da";
                    document.getElementById("first-name").style.color = "#a6e4da";
                break;
                case 1: 
                    document.getElementsByClassName("bar-container")[1].style.backgroundColor="#e6f7ec";
                    document.getElementsByClassName("Mbti-bar")[1].style.backgroundColor="#ace4c0";
                break;
                case 2:
                    document.getElementsByClassName("bar-container")[2].style.backgroundColor="#f4e6f7";
                    document.getElementsByClassName("Mbti-bar")[2].style.backgroundColor="#e2b9ea";
                break;
                case 3:
                    document.getElementsByClassName("bar-container")[3].style.backgroundColor="#f6f2e1";
                    document.getElementsByClassName("Mbti-bar")[3].style.backgroundColor="#e4daa6";
                break;
            }
        }
        content(prediction[0].className);
    }
    function content(title){
        switch(title){
            case "ENFJ": 
            document.getElementById("first-name").innerHTML = "정의로운 사회운동가 ENFJ";
            document.getElementById("content").innerHTML = "\
            선도자는 진실함과 이타주의 등 자신의 가치관을 적극적으로 설파하며, 부당하거나 잘못된 일이라고 생각이 되면 이에 반대의 목소리를 냅니다. \
            그러나 보통은 성급하게 자기 생각을 강요하기보다는 세심함과 통찰력으로 다른 사람의 공감을 이끌어내는 방법을 선택할 때가 많습니다.\
            선도자는 다른 사람의 의도와 믿음을 간파하는 데 놀라운 소질이 있으며, 가끔씩은 자신도 눈치채지 정도로 빠르게 다른 사람의 생각과 감정을 파악하곤 합니다. \
            이렇게 번뜩이는 통찰력은 남을 설득하고 다른 사람에게 의욕을 불어넣는 데 큰 도움이 됩니다.";
            break;
            case "ENFP": 
            document.getElementById("first-name").innerHTML = "재기발랄한 활동가 ENFP";
            document.getElementById("content").innerHTML = "\
            활동가는 친절하고 사교적인 성격으로 다른 사람과의 관계를 맺는 일과 사교 활동을 즐깁니다. \
            하지만 사교적이고 느긋해 보이는 겉모습과 달리 깊은 내면을 지니고 있으며 상상력과 창의력이 풍부하고 호기심이 많은 성격입니다.\
            활동가는 자기 성찰적인 모습을 보일 때가 있으며, 다른 일에 주의를 기울여야 할 때도 삶의 근본적인 의미와 중요성에 대해 생각하곤 합니다. \
            또한 모든 사물과 사람이 연결되어 있다고 믿으며 이러한 관계에 대한 통찰을 추구합니다.";
            break;
            case "ENTJ": 
            document.getElementById("first-name").innerHTML = "대담한 통솔자 ENTJ";
            document.getElementById("content").innerHTML = "\
            통솔자(ENTJ)는 타고난 지도자라고 할 수 있습니다. 이들은 카리스마와 자신감을 지니고 있으며 자신의 권한을 이용해 사람들이 공통된 목표를 위해 함께 노력하도록 이끕니다. \
            또한 이들은 냉철한 이성을 지닌 것으로 유명하며, 자신이 원하는 것을 성취하기 위해 열정과 결단력과 날카로운 지적 능력을 활용합니다. \
            이들은 전체 인구의 3%에 불과하지만 다른 많은 성격을 압도하는 존재감을 뽐내며, 많은 비즈니스와 단체를 이끄는 역할을 할 때가 많습니다.";
            break;
            case "ENTP": 
            document.getElementById("first-name").innerHTML = "뜨거운 논쟁을 즐기는 변론가 ENTP";
            document.getElementById("content").innerHTML = "\
            변론가(ENTP)는 두뇌 회전이 빠르고 대담한 성격으로 현재 상황에 이의를 제기하는 데 거리낌이 없습니다. \
            변론가는 어떤 의견이나 사람에 반대하는 일을 두려워하지 않으며, 논란이 될 만한 주제에 대해 격렬하게 논쟁하는 일을 즐깁니다.\
            그렇다고 변론가가 반론을 제기하는 데만 관심이 있거나 악의를 지닌 것은 아닙니다. 사실 변론가는 지식이 풍부하고 호기심이 넘치며 활기찬 유머 감각으로 다른 사람을 즐겁게 할 수 있는 성격입니다. \
            다만 대부분의 성격과 달리 논쟁에서 즐거움을 찾는 성향이 있을 뿐입니다.";
            break;
            case "ESFJ": 
            document.getElementById("first-name").innerHTML = "사교적인 외교관 ESFJ";
            document.getElementById("content").innerHTML = "\
            집정관(ESFJ)에게 인생이란 남과 함께 나눌 때 가장 즐거운 것입니다. 이들은 여러 사람을 하나로 모으는 역할을 하며 솔직하고 개방적인 태도로 친구와 연인과 이웃을 대합니다.\
            집정관이라고 모든 사람을 좋아하고 무한한 관용을 베푸는 것은 아닙니다. 하지만 일반적으로 친절하고 따뜻한 태도를 유지하는 것이 도움이 되리라고 믿으며, 주변 사람들에 대한 강한 책임감을 느끼곤 합니다.\
            이들은 관대하고 믿을 수 있는 성격으로 가족과 주변 사람을 챙기기 위해 자신을 희생할 때가 많습니다.";
            break;
            case "ESFP": 
            document.getElementById("first-name").innerHTML = "자유로운 영혼의 연예인 ESFP";
            document.getElementById("content").innerHTML = "\
            연예인(ESFP)은 즉흥적으로 노래하고 춤을 추는 일을 즐기는 성격입니다. \
            이들은 지금 이 순간을 즐기며 남들도 자신과 같은 즐거움을 느낄 수 있기를 바랍니다.\
            또한 남을 응원하는 데 기꺼이 시간과 에너지를 투자하며, 매우 매력적인 방식으로 다른 사람의 기운을 북돋곤 합니다.";
            break;
            case "ESTJ": 
            document.getElementById("first-name").innerHTML = "엄격한 관리자 ESTJ";
            document.getElementById("content").innerHTML = "\
            경영자(ESTJ)는 전통과 질서를 중시하는 성격으로, 자신이 생각하는 옳고 그름과 사회적 기준에 따라 가족과 공동체가 화합할 수 있도록 노력합니다. \
            이들은 정직과 헌신과 존엄성을 중시하며, 어려운 길을 기꺼이 앞장서고 다른 사람들에게 명확한 조언과 지도를 제공합니다.\
             이들은 사람들이 화합하도록 하는 일에서 자부심을 느끼며, 모든 사람이 지역 축제를 즐길 수 있도록 노력하거나 가족과 공동체의 전통적인 가치관을 지키는 역할 등을 맡곤 합니다.";
            break;
            case "ESTP": 
            document.getElementById("first-name").innerHTML = "모험을 즐기는 사업가 ESTP";
            document.getElementById("content").innerHTML = "\
            사업가(ESTP)는 항상 주변 사람에게 영향력을 행사하곤 합니다. 파티에서 가는 곳마다 사람들에게 둘러싸여 있는 사람을 발견한다면 아마 사업가일 것입니다. \
            이들은 직설적인 유머 감각을 지니고 있으며 수많은 사람의 관심을 받는 일을 즐깁니다. \
            한 마디로 사회자가 무대로 올라올 사람을 찾을 때 직접 무대로 올라가는 성격이라고 할 수 있습니다.\
            사업가는 이론적이고 추상적인 개념과 지루한 토론에는 관심이 없습니다. 지능이 높고 활기찬 대화를 유지할 수 있는 성격이기는 하지만 현실적인 주제에 대해 이야기하고 직접 행동하는 성격이기 때문입니다. \
            이들은 계획을 심사숙고하기보다는 먼저 행동하고 시행착오를 겪으며 실수를 바로잡기를 원합니다.";
            break;
            case "INFJ": 
            document.getElementById("first-name").innerHTML = "선의의 옹호자 INFJ";
            document.getElementById("content").innerHTML = "\
            옹호자(INFJ)는 매우 희귀한 성격임에도 불구하고 세상에 큰 영향력을 발휘하곤 합니다. 이들은 이상주의적이고 원칙주의적인 성격으로, 삶에 순응하는 대신 삶에 맞서 변화를 만들어 내고자 합니다. \
            이들에게 성공이란 돈이나 지위가 아니라 자아를 실현하고 다른 사람을 도우며 세상에서 선을 실천하는 일입니다.\
            원대한 목표와 야망을 품고 있다고 해서 옹호자가 몽상가와 같은 성격이라는 뜻은 아닙니다. 이들은 원칙과 완벽함을 중시하며 자신이 옳다고 믿는 일을 끝내기 전에는 만족하지 않습니다. \
            또한 매우 양심적인 성격으로 자신의 확실한 가치관에 따라 인생을 살아가며, 다른 사람이나 사회의 가치를 따르는 대신 자신의 지혜와 직관을 통해 정말로 중요한 가치를 찾기 위해 노력합니다.";
            break;
            case "INFP": 
            document.getElementById("first-name").innerHTML = "열정적인 중재자 INFP";
            document.getElementById("content").innerHTML = "\
            조용하거나 겸손해 보일 수 있지만 중재자(INFP)는 활기차고 열정적인 내면의 삶을 살고 있습니다. \
            창의적이고 상상력이 풍부한 그들은 행복하게 백일몽에 빠져 마음 속에 온갖 종류의 이야기와 대화를 만들어 냅니다. \
            이러한 성격은 감수성으로 유명합니다. 중재자는 음악, 예술, 자연 및 주변 사람들에 대해 심오한 감정적 반응을 보일 수 있습니다.\
            이상주의적이고 공감적인 중재자는 깊고 영혼이 담긴 관계를 갈망하며 다른 사람들을 도우라는 부름을 느낍니다. \
            그러나 이 성격 유형은 인구의 아주 작은 부분을 구성하기 때문에 중재자는 때때로 자신을 독특하게 만드는 특성을 인식하지 못하는 것처럼 보이는 세상에서 외롭거나 보이지 않는 것처럼 느낄 수 있습니다.";
            break;
            case "INTJ": 
            document.getElementById("first-name").innerHTML = "용의주도한 전략가 INTJ";
            document.getElementById("content").innerHTML = "\
            최고가 되는 것은 외로운 일입니다. 매우 희귀한 성격이면서도 뛰어난 능력을 지닌 전략가(INTJ)는 이러한 말의 의미를 잘 알고 있습니다. \
            전략가는 이성적이면서도 두뇌 회전이 빠른 성격으로, 자신의 뛰어난 사고 능력을 자랑스러워하며 거짓말과 위선을 꿰뚫어 보는 능력이 있습니다. \
            하지만 이로 인해 끊임없이 생각하고 주변의 모든 것을 분석하려는 자신의 성향을 이해할 수 있는 사람을 찾는 데 어려움을 겪기도 합니다.";
            break;
            case "INTP": 
            document.getElementById("first-name").innerHTML = "논리적인 사색가 INTP";
            document.getElementById("content").innerHTML = "\
            논리술사(INTP)는 자신의 독특한 관점과 활기 넘치는 지성에 자부심을 느끼며, 우주의 미스터리에 대해 깊이 생각하곤 합니다. \
            유명한 철학자와 과학자 중 논리술사 성격이 많은 것도 이 때문일 것입니다. 논리술사는 상당히 희귀한 성격이지만 뛰어난 창의성과 독창성으로 많은 사람 사이에서 존재감을 드러내곤 합니다. \
            이렇게 논리적이면서도 마술사와 같은 창의력을 발휘하는 성격이기에 ‘논리술사’라고 부르게 되었습니다.";
            break;
            case "ISFJ": 
            document.getElementById("first-name").innerHTML = "용감한 수호자 ISFJ";
            document.getElementById("content").innerHTML = "\
            수호자(ISFJ)는 겸손한 자세로 세상을 지탱하는 역할을 합니다. 이들은 근면하고 헌신적인 성격으로 주변 사람들에 대한 깊은 책임감을 느낍니다. \
            이들은 마감 기한을 철저히 지키고 동료와 친구의 생일과 기념일을 챙기며, 기존 질서를 유지하고 주변 사람을 배려하는 동시에 기꺼이 도움의 손길을 건넵니다. \
            또한 감사를 요구하기보다는 뒤에서 묵묵히 헌신하는 성격이라고 할 수 있습니다.\
            수호자는 유능하고 긍정적인 성격으로 다양한 방면에서 역량을 발휘합니다. 또한 세심하고 배려심이 넘치며 분석 능력과 세부 사항 파악 능력도 뛰어납니다. \
            그리고 차분한 성격인 동시에 대인 관계 능력도 뛰어나며, 이 때문에 여러 사람과 깊은 관계를 맺을 가능성도 큽니다. 이들의 다양한 장점은 시너지 효과를 내며 일상생활에서도 빛을 발하곤 합니다.";
            break;
            case "ISFP": 
            document.getElementById("first-name").innerHTML = "호기심 많은 예술가 ISFP";
            document.getElementById("content").innerHTML = "\
            모험가(ISFP)는 진정한 의미의 예술가라고 할 수 있습니다. 하지만 모험가라고 반드시 예술 업계에만 종사하는 것은 아닙니다. \
            이들에게는 삶 자체가 자신을 표현하기 위한 캔버스이기 때문입니다. 이들은 입는 옷부터 여가 시간을 보내는 방식까지 다양한 측면에서 자신의 독특한 개성을 생생히 드러냅니다.\
            모든 모험가는 각자 독특한 성격을 지니고 있습니다. 이들은 호기심이 많고 새로운 것을 추구하는 성격으로 다양한 분야에 관심과 열정을 보일 때가 많습니다. \
            모험가는 탐험가적 성향과 일상 생활에서 즐거움을 찾을 수 있는 능력을 지니고 있는 매우 흥미로운 성격이라고 할 수 있습니다. 그러나 보통 자신의 놀라운 개성에 자만하는 대신 자신이 하고 싶은 일을 할 뿐이라고 겸손하게 생각하곤 합니다.";
            break;
            case "ISTJ": 
            document.getElementById("first-name").innerHTML = "청렴결백한 논리주의자 ISTJ";
            document.getElementById("content").innerHTML = "\
            현실주의자(ISTJ)는 진실하게 행동하는 자신의 모습에서 자부심을 느끼며, 자기 생각을 솔직하게 이야기하고 어떤 것에 헌신하기로 한 경우 최선을 다합니다.\
            현실주의자는 인구의 상당 부분을 차지합니다. 화려한 삶이나 다른 사람의 주의를 끄는 일에는 관심이 없으며, 안정된 사회를 위해 자신의 몫보다 많은 기여를 하곤 합니다. \
            이들은 가족이나 주변 사람들로부터 믿음직한 사람이라는 평판을 받을 때가 많으며, 현실 감각이 뛰어나 스트레스가 극심한 상황에서도 현실적이고 논리적인 태도를 유지하는 사람으로 인정받곤 합니다.";
            break;
            case "ISTP": 
            document.getElementById("first-name").innerHTML = "만능 재주꾼 ISTP";
            document.getElementById("content").innerHTML = "\
            장인(ISTP)은 이성과 호기심을 통해 세상을 바라보며 눈과 손으로 직접 탐구하는 일을 즐깁니다. \
            이들은 타고난 손기술을 지니고 있으며, 다양한 프로젝트에서 유용하고 재미있는 물건을 만들어 내고 주변 환경에서 배울 점을 찾습니다. \
            장인은 보통 기술자나 엔지니어로 일하는 경우가 많으며 물건을 직접 분해하고 조립해 개선하는 일을 즐깁니다.";
        }
    }
</script>
</body>
<!--
Copyright (c) 2022 by Matt  (https://codepen.io/uixmat/pen/yadZXv)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->
</html>